#     Структурни шаблони за дизайн
##    Decorator Pattern
### Цел на шаблона
* Декораторът добавя функционалност към даден обект динамично. Шаблонът се използва като алтернатива на наследяването. Използва се и когато искаме да добавим функционалност към конкретен обект, без да променяме класа, към който обектът принадлежи. Често, такива са случаите, в които прибавяме функционалност към системи, чиято поддръжка е прекратена (legacy code). Декорирането е структурно различен подход от наследяването. Докато при наследяването добавянето на функционалност се извършва на ниво клас, при декорирането надграждането се изпълнява на ниво обект.

### Приложимост
Шаблонът "Декоратор" (Decorator) е полезен в ситуациите когато:

* Искаме да добавим отговорност към обект динамично, без да променяме класа на обекта, т.е. без да изискваме промяна на всички инстанции на класа.
* Искаме да отменим отговорност (свойства и поведение).
* Използването на наследяване е непрактично. Например, много на брой функционалности могат да бъдат комбинирани независимо една от друга, което води до огромен брой подкласове. Друг пример е ситуация, в която даден клас е недостъпен за наследяване.

### Участници
Шаблонът се състои от четири участника: Компонент (__Component__), Конкретен компонент (__Concrete Component__), Декоратор (__Decorator__), Конкретен декоратор (__Concrete Decorator__).

*  Компонент (Component) - 
Участникът Компонент (Component) дефинира интерфейса на декоратора и декорирания обект. Той може да бъде както интерфейс, така и абстрактен клас. 
* 	Конкретен компонент (Concrete Component) - 
Конкретният компонент (Concrete Component) дефинира обект, към който ще бъде добавена функционалност динамично.
*   Декоратор (Decorator) - 
Декоратор (Decorator) е абстрактен клас, който наследява Компонент (Component) и вътрешно държи инстанция от същия тип. Основната функция на този клас е да пренасочва заявките на клиента към обвития обект от тип Компонент (Component).  
*   Конкретен декоратор (Concrete Decorator) - 
Конкретният декоратор е наследник на Декоратор (Decorator), който добавя желаната функционалност към декорирания обект. 

### Оценка на шаблона
Шаблонът "Декоратор" (Decorator) има следните особености:

* Декораторът е по-гъвкав в сравнение с наследяването. Ключово предимство на шаблона е възможността  множество декоратори да бъдат закачени и разкачени към даден обект по време на изпълнение на програмата. Това предоставя лесен и удобен начин за добавяне и отнемане на отговорности към обект динамично.
За разлика от декорирането, наследяването изисква създаването на нов клас за всяка добавена отговорност. При този подход дори малко на брой отговорности могат доведат до създаването на множество класове, които да направят системата тежка и трудна за надграждане.
Също така декораторът позволява даден обект да бъде обвит многократно с една и съща обвивка. 
*	Декораторът избягва поставянето на прекалено много отговорности в базовите класове на йерархията. Тъй като улеснява комбинирането на малки частици функционалност, шаблонът предоставя удобен подход за изграждането на обекти, които притежават само отговорностите, от които се нуждаят. Именно по този начин декораторът отстранява необходимостта от тежък базов клас, който да натоварва наследниците си с всички отговорности, от които биха имали нужда. Шаблонът ни дава възможност да изградим обекти с желаната функционалност като ги обвием последователно в нужните декоратори.
*	Декораторът и декорираният обект не са идентични. Въпреки че обвивката е прозрачна за обвития обект и за клиента, декорираният обект и декораторът имат различна идентичност. 
*	Прилагането на шаблона може да разбие системата на множество сходни малки обекти, които се различават по начина по който са закачени един към друг, но не и по типа или стойността на своите променливи. Подобни системи позволяват лесно да бъдат надградени, но също така са трудни за разбиране и дебъгване.

### Свързани шаблони
* "Адаптер" (Adapter) - Шаблоните "Декоратор" (Decorator) и "Адаптер" (Adapter) променят поведението на даден обект. За разлика от Декоратора, обаче, Адаптерът придава на обекта изцяло нов интерфейс.
* "Композиция" (Composite) - Декораторът може да бъде разгледан като частен случай на шаблона "Композиция" (Composite), в който обектът Композиция (Composition) съдържа точно един Компонент (Component). Въпреки това, основната отговорност на Декоратора е добавяне или отнемане на функционалност към обект. Шаблонът не е предвиден за агрегиране на обекти.
* "Стратегия" (Strategy) - Докато декорирането променя обекта външно, без неговото знание, шаблонът "Стратегия" (Strategy) подменя вътрешността на обекта и изисква обектът да знае за всички съществуващи стратегии. Тя е подходяща алтернатива на Декоратора, когато базовият клас Компонент (Component) съдържа много отговорности.
* "Прокси" (Proxy) - Шаблоните Декоратор и Прокси залагат сходна огранизация на класовете участници, но целите на двата шаблона се различват значително. За разлика от Декоратора, Проксито не се използва за добавяне на функционалност към обект. Шаблонът цели да създаде заместник на даден обект, който да позволи контролиран достъп до обекта.


